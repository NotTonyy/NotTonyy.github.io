<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.2.0/p5.min.js"></script>
        <script defer src="https://unpkg.com/p5.collide2d"></script>
        <style>
            body{
                width:100%;
                height: 100%;
                margin: 0px;
                border: 0;
                overflow: hidden;
                display:block;
            }
        </style>
    </head>
    <body>
        <script>
            var w = window.innerWidth;
            var h = window.innerHeight;
            var x = w/2;
            var y = h/2;
            //declare the name of the object
            var bigblock;
            var bigblock2;
            var bigblock3;
            var bigblock4;
            var bigblock5;
            var bigblock6;
            var bigblock7;
            var bigblock8;
            //Declare a timer
            var timer = 0;
            var playerr1;
            var coin;
            var totalcoin

        function setup(){
            createCanvas(w,h);
            //load the object
            var timer = 0;
            
            playerr1 = new playerr1();
            bigblock = new bigblock();
            bigblock2 = new bigblock2();
            bigblock3 = new bigblock3();
            bigblock4 = new bigblock4();
            bigblock5 = new bigblock5();
            bigblock6 = new bigblock6();
            bigblock7 = new bigblock7();
            bigblock8 = new bigblock8();
            coin = new coin();
        }
var hit = false;
var hit2 = false;
var hit3 = false;
var hit4 = false;
var hit5 = false;
var totalcoin = 0
function draw() {
    clear()
    playerr1.show()
    playerr1.update()
    bigblock.show()
    bigblock.update()
    bigblock2.show()
    bigblock2.update()
    bigblock3.show()
    bigblock3.update()
    bigblock4.show()
    bigblock4.update()
    bigblock5.show()
    bigblock5.update()
    bigblock6.show()
    bigblock6.update()
    bigblock7.show()
    bigblock7.update()
    bigblock8.show()
    bigblock8.update()
    coin.show()
    coin.update()
    
    
    hit = collideRectCircle(bigblock.x, bigblock.y,bigblock.width,bigblock.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))
    hit2 = collideRectCircle(bigblock2.x, bigblock2.y,bigblock2.width,bigblock2.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))
    hit3 = collideRectCircle(bigblock3.x, bigblock3.y,bigblock3.width,bigblock3.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))
    hit4 = collideRectCircle(bigblock4.x, bigblock4.y,bigblock4.width,bigblock4.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))
    hit5 = collideRectCircle(bigblock5.x, bigblock5.y,bigblock5.width,bigblock5.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))
    hit6 = collideRectCircle(bigblock6.x, bigblock6.y,bigblock6.width,bigblock6.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))    
    hit7 = collideRectCircle(bigblock7.x, bigblock7.y,bigblock7.width,bigblock7.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))    
    hit8 = collideRectCircle(bigblock8.x, bigblock8.y,bigblock8.width,bigblock8.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))        
    coinhit = collideRectCircle(coin.x, coin.y,coin.width,coin.height, playerr1.x,playerr1.y,(playerr1.diam - (playerr1.diam/2)))

       if(millis() >= 1 + timer){
                timer = millis();
                document.getElementById("timer1").innerHTML = "Use WASD to move. Survive as long as possible while collecting coins. You have survived for "+(timer/1000).toFixed(0) + " seconds"
                }
        if (hit==true||hit2==true||hit3==true||hit4==true||hit5==true||hit6==true||hit7==true||hit8==true){
        timer = 0;
        window.alert("dead")
        playerr1.x = w/2
        playerr1.y = h/2
        noLoop()
        console.log(hit)
        console.log(hit2)
        console.log(hit3)
        console.log(hit4)
        console.log(hit5)  
       }
       if (coinhit == true){
           totalcoin++
        document.getElementById("coinscore").innerHTML = totalcoin + " coins"
           coin.x = random(0,w)
           coin.y = random(0,h)
       }

    }
    
    function playerr1(){
        this.x = w/2
        this.y = h/2
        this.width = 50;
        this.height = 50;
        this.diam = 60;
        this.show = function(){
            /*imagething = loadImage("imagething.png")*/
            fill(color("red"));
            circle(this.x,this.y,this.diam);
            //rectMode(CENTER)
        }
        this.update = function(){
        //up
        if(keyIsDown(87)&&(this.y > 0)){
               this.y = this.y -= 10
            }

            //down
            if(keyIsDown(83)&&(this.y<h-70)){
              this.y = this.y += 10
            }
            //left
            if(keyIsDown(65)&&(this.x > 0)){
              this.x = this.x -= 10
            }
            //right

            if(keyIsDown(68)&&(this.x<w-50)){
              this.x = this.x += 10
            }
        }

}
function bigblock(){
        this.width = 20
        this.height = 40
        this.x = (2*w)/3;
        this.y = 0-100;
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.y = this.y + 12
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 5
                }
             
    } 
}

    function bigblock2(){
        this.width = 40
        this.height = 20
        this.x = 0
        this.y = random(50,h-this.height)
        this.show = function(){
            fill(color('blue'));
            rect(this.x,this.y,this.width,this.height);
        }
        this.update = function(){
            this.x = this.x + 16
            if (this.x>w){
                this.y = random(50,h-this.height)
                this.x = 0
            }
            if ((millis()/1000)>15){
                this.x = this.x + 5
                }
        }
    }
    function bigblock3(){
        this.width = 40
        this.height = 20
        this.x = 0
        this.y = random(50,h-this.height)
        this.show = function(){
            fill(color('blue'));
            rect(this.x,this.y,this.width,this.height);
        }
        this.update = function(){
            this.x = this.x + 15
            if (this.x>w){
                this.y = random(50,h-this.height)
                this.x = 0
            }
            if ((millis()/1000)>15){
                this.x = this.x + 5
                }
        }
    }
 function bigblock4(){
        this.width = 20
        this.height = 40
        this.x = (2*w)/3;
        this.y = 0-100;
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.y = this.y + 12
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 5
                }
             
    } 
}
function bigblock5(){
        this.width = 20
        this.height = 40
        this.x = 800;
        this.y = 0-100;
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.y = this.y + 12
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 5
                }          
    } 
}
function bigblock6(){
        this.width = 20
        this.height = 40
        this.x = 500;
        this.y = 0-100;
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.y = this.y + 12
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 5
                }          
    } 
}
function bigblock7(){
        this.width = 20
        this.height = 40
        this.x = 900;
        this.y = 0-100;
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.y = this.y + 13
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 7
                }          
    } 
}
function bigblock8(){
        this.width = 40
        this.height = 20
        this.x = 0;
        this.y = random(50,h-this.height);
       
            //this function is kind of like the setup for this object
            this.show = function(){
                fill(color('blue'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.x = this.x + 17
                if (this.y > h-10){
                this.x = random(50,w-50);
                this.y = 0;
                }
                if ((millis()/1000)>15){
                this.y = this.y + 5
                }          
    } 
}
function coin(){
        this.width = 50
        this.height = 50
        this.x = 700;
        this.y = 0;
       
            //this function is kind of like the setup for this object
 this.show = function(){
                fill(color('yellow'));
                rect(this.x,this.y,this.width,this.height);
            }
            this.update = function(){
                this.x += random(-20,20)
                this.y += random(-20,20)

                if(this.x<0||this.x>w||this.y<0||this.y>h){
                    this.x = random(0,w)
                    this.y = random(0,h)
                }
                }
                
             
    } 



        </script>
        <h1 id="timer1">0</h1>
        <h1 id="coinscore">0</h1>
    </body>
   
</html>